---
phase: 07-public-gallery
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/presentation/components/Breadcrumb.tsx
  - src/app/albums/page.tsx
  - src/app/albums/[id]/page.tsx
autonomous: true

must_haves:
  truths:
    - "Visitor sees list of published albums with cover thumbnails"
    - "Albums display in sortOrder (admin's drag-drop order)"
    - "Clicking album shows photo grid with title and description"
    - "Breadcrumb navigation shows path back to album list"
    - "Photo grid is responsive: 1 col phone, 2 col tablet, 3 col desktop"
  artifacts:
    - path: "src/presentation/components/Breadcrumb.tsx"
      provides: "Accessible breadcrumb navigation"
      min_lines: 20
    - path: "src/app/albums/page.tsx"
      provides: "Album listing page"
      min_lines: 40
    - path: "src/app/albums/[id]/page.tsx"
      provides: "Album detail with photo grid"
      min_lines: 50
  key_links:
    - from: "src/app/albums/page.tsx"
      to: "SQLiteAlbumRepository"
      via: "direct import"
      pattern: "findPublished"
    - from: "src/app/albums/[id]/page.tsx"
      to: "SQLitePhotoRepository"
      via: "direct import"
      pattern: "findByAlbumId"
    - from: "src/app/albums/[id]/page.tsx"
      to: "/api/images"
      via: "next/image src"
      pattern: "/api/images/"
---

<objective>
Create the public gallery pages: album listing and album detail with photo grid.

Purpose: Visitors need to browse albums and view photos. This implements the core public-facing gallery experience with responsive design.

Output: /albums page showing album list, /albums/[id] page showing photo grid, and Breadcrumb component for navigation.
</objective>

<execution_context>
@/Users/arxherre/.claude/get-shit-done/workflows/execute-plan.md
@/Users/arxherre/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/07-public-gallery/07-CONTEXT.md
@.planning/phases/07-public-gallery/07-RESEARCH.md

@src/infrastructure/database/repositories/SQLiteAlbumRepository.ts
@src/infrastructure/database/repositories/SQLitePhotoRepository.ts
@src/domain/entities/Album.ts
@src/domain/entities/Photo.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Breadcrumb component</name>
  <files>src/presentation/components/Breadcrumb.tsx</files>
  <action>
Create an accessible breadcrumb navigation component.

Implementation details:

1. Accept props: `items: { label: string; href?: string }[]`
2. Use semantic HTML: `<nav aria-label="Breadcrumb">` with `<ol>` list
3. For each item:
   - If href exists: render as Link (from next/link)
   - If no href (last item): render as span with `aria-current="page"`
4. Add separator between items (use "/" or ">" - keep minimal)
5. Style with Tailwind:
   - Text: small, gray-600 for links, gray-900 for current
   - Hover: underline or slight color change on links
   - Spacing: gap-2 between items, mb-6 for margin below
6. Hide separators from screen readers with `aria-hidden="true"`

Keep it minimal and clean - this is a photo-focused site.
</action>
<verify>
Check file exists and exports Breadcrumb component:

```bash
grep -l "export.*Breadcrumb" src/presentation/components/Breadcrumb.tsx
```

Check for accessibility attributes:

```bash
grep "aria-label" src/presentation/components/Breadcrumb.tsx
grep "aria-current" src/presentation/components/Breadcrumb.tsx
```

  </verify>
  <done>
- Breadcrumb component exists with proper TypeScript types
- Uses semantic nav > ol structure
- Has aria-label and aria-current for accessibility
- Styled with Tailwind, minimal design
  </done>
</task>

<task type="auto">
  <name>Task 2: Create album listing page</name>
  <files>src/app/albums/page.tsx</files>
  <action>
Create the album listing page as a Server Component.

Implementation details:

1. Use Server Component (no "use client") - fetch data directly
2. Import SQLiteAlbumRepository and SQLitePhotoRepository
3. Fetch published albums with `findPublished()` - already sorted by sortOrder
4. For each album, resolve cover photo:
   - If coverPhotoId exists, use it
   - Otherwise, get first photo from album using `findByAlbumId()`
5. Render compact list layout (per CONTEXT.md):
   - Each album: 80px square thumbnail + title only
   - No photo counts or descriptions on listing
   - Use Link to /albums/{id}
6. Use next/image with:
   - src: `/api/images/{coverId}/300w.webp`
   - fill prop with aspect-square container
   - sizes="80px" (fixed small size)
   - object-cover for cropping
7. Show placeholder icon if no photos in album (gray background with image icon)
8. Style with Tailwind:
   - max-w-2xl mx-auto for centered narrow layout
   - py-8 px-4 for padding
   - space-y-4 for album spacing
   - hover:bg-gray-50 on album links
   - rounded-lg overflow-hidden on thumbnails

Minimalist design - let the photos speak for themselves.
</action>
<verify>
Start dev server and visit http://localhost:3000/albums

- Page loads without errors
- Published albums appear in sortOrder
- Cover thumbnails display (or placeholder if empty)
- Clicking album navigates to /albums/[id]

Also check:

```bash
grep "findPublished" src/app/albums/page.tsx
```

  </verify>
  <done>
- /albums page renders published albums
- Albums sorted by sortOrder (admin's order)
- Cover thumbnails show (80px squares)
- Only title shown, no counts/descriptions
- Links work to album detail pages
  </done>
</task>

<task type="auto">
  <name>Task 3: Create album detail page with photo grid</name>
  <files>src/app/albums/[id]/page.tsx</files>
  <action>
Create the album detail page with responsive photo grid.

Implementation details:

1. Server Component with async params (Next.js 16 pattern):
   ```typescript
   interface PageProps {
     params: Promise<{ id: string }>;
   }
   export default async function AlbumPage({ params }: PageProps) {
     const { id } = await params;
   ```
2. Fetch album by id and photos by albumId in parallel with Promise.all
3. If album not found OR not published, call `notFound()` (from next/navigation)
4. Filter photos to only show status === "ready"
5. Render page structure:
   - Breadcrumb: Home > Albums > {album.title}
   - Album title (text-3xl font-semibold)
   - Album description if exists (text-gray-600, mb-8)
   - Photo grid
6. Photo grid with Tailwind:
   - `grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3`
   - Each photo: aspect-square container with overflow-hidden rounded-lg
   - next/image with fill, object-cover
   - src: `/api/images/{photoId}/600w.webp`
   - sizes: "(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 33vw"
   - Add hover:scale-105 transition for subtle zoom effect
   - Add cursor-pointer and data-photo-id attribute (prep for Phase 8 lightbox)
7. Empty state: "No photos in this album yet." centered text
8. Container: max-w-6xl mx-auto px-4 py-8

Use gap-6 for generous spacing (clean gallery feel per CONTEXT.md).
</action>
<verify>
Start dev server and visit http://localhost:3000/albums/[some-album-id]

- Album title and description display
- Breadcrumb shows correct path
- Photos display in responsive grid
- Mobile: 1 column
- Tablet (sm): 2 columns
- Desktop (lg): 3 columns
- 404 for non-existent album

Also check:

```bash
grep "await params" src/app/albums/\\[id\\]/page.tsx
grep "notFound" src/app/albums/\\[id\\]/page.tsx
grep "grid-cols-1" src/app/albums/\\[id\\]/page.tsx
```

  </verify>
  <done>
- /albums/[id] page renders album with photos
- Breadcrumb navigation works
- Unpublished albums return 404
- Photo grid is responsive (1/2/3 columns)
- Only "ready" photos displayed
- Photos have cursor-pointer and data attributes for future lightbox
  </done>
</task>

</tasks>

<verification>
1. Breadcrumb component exists and is accessible
2. Album listing shows published albums only
3. Albums appear in sortOrder (admin's drag-drop order)
4. Album detail shows title, description, photo grid
5. Photo grid responsive: 1 col mobile, 2 col tablet, 3 col desktop
6. Non-existent/unpublished albums return 404
</verification>

<success_criteria>

- /albums page lists albums with cover thumbnails
- /albums/[id] shows responsive photo grid
- Breadcrumb enables navigation back to album list
- Design is minimal and photo-focused
  </success_criteria>

<output>
After completion, create `.planning/phases/07-public-gallery/07-02-SUMMARY.md`
</output>
