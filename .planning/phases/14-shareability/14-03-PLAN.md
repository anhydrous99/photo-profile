---
phase: 14-shareability
plan: 03
type: execute
wave: 3
depends_on: ["14-02"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "All four SHAR requirements verified by human testing"
    - "OG preview cards render correctly on social media validators"
  artifacts: []
  key_links: []
---

<objective>
Human verification of all shareability features: URL sync, deep links, and OpenGraph previews.

Purpose: This is the final phase of v1.1. Verification ensures URL updates work across all pages, deep links resolve correctly, and OG tags render properly in social media preview tools.

Output: Confirmed working phase or list of issues to address.
</objective>

<execution_context>
@/Users/arxherre/.claude/get-shit-done/workflows/execute-plan.md
@/Users/arxherre/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/14-shareability/14-01-SUMMARY.md
@.planning/phases/14-shareability/14-02-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Automated pre-flight checks</name>
  <files></files>
  <action>
  Run the following automated checks before asking for human verification:

1. `npm run typecheck` -- ensure no type errors
2. `npm run lint` -- ensure no lint errors
3. `npm run build` -- ensure production build succeeds
4. Start dev server and use curl to verify:
   - `curl -s http://localhost:3000 | grep 'og:title'` -- homepage OG tag exists
   - `curl -s http://localhost:3000/albums | grep -c 'href="/albums/'` -- albums page renders links
   - Pick an album ID from the database and curl its page to verify OG tags
   - Pick a photo ID, compute its 8-char slug, curl the deep link to verify it returns HTML

Report results for the human verification step.
</action>
<verify>All automated checks pass (typecheck, lint, build, curl OG tag detection).</verify>
<done>Automated verification confirms the build is healthy and OG tags are present in HTML responses.</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
  Complete shareability feature set for Phase 14:

**URL Sync (SHAR-01):**

- Lightbox navigation updates browser URL with photo slug
- Album photos: /albums/{albumId}/photo/{slug}
- Homepage photos: /photo/{slug}
- Closing lightbox restores original page URL

**Deep Links (SHAR-02):**

- Direct navigation to photo URL opens lightbox on that photo
- Album photo deep links show full album with lightbox pre-opened
- Homepage photo deep links show homepage with lightbox pre-opened

**Album OG Tags (SHAR-03):**

- Album pages have og:title, og:description, og:image
- Cover photo used as OG image

**Homepage OG Tags (SHAR-04):**

- Homepage has og:title, og:description with site name
  </what-built>
  <how-to-verify>
  Start dev server: `npm run dev`

**1. URL Sync (SHAR-01):**

- Open http://localhost:3000
- Click a photo -> URL bar updates to `/photo/{8chars}`
- Navigate to next photo -> URL updates with new slug
- Press browser Back -> should NOT step through individual photos (replaceState, not pushState)
- Close lightbox -> URL returns to `/`
- Open an album page, click a photo -> URL updates to `/albums/{id}/photo/{8chars}`
- Close lightbox -> URL returns to `/albums/{id}`

**2. Deep Links (SHAR-02):**

- Copy a photo URL from step 1 (e.g., `/albums/{id}/photo/{slug}`)
- Open it in a new browser tab -> lightbox should open immediately on that photo
- Navigate within the lightbox -> you can browse the full album
- Copy a homepage photo URL (e.g., `/photo/{slug}`)
- Open in new tab -> homepage renders with lightbox open on that photo
- Try an invalid slug (e.g., `/photo/zzzzzzzz`) -> should show 404 page

**3. OG Tags (SHAR-03 + SHAR-04):**

- View page source of http://localhost:3000 -> look for `<meta property="og:title"` with site name
- View page source of an album page -> look for `og:title` with album name, `og:image` with absolute URL
- View page source of a photo deep link -> look for `og:image` pointing to 1200w.webp
- (Optional) Test with https://opengraph.xyz or Facebook Sharing Debugger if deployed
  </how-to-verify>
  <resume-signal>Type "approved" if all checks pass, or describe any issues found.</resume-signal>
  </task>

</tasks>

<verification>
Human confirms all four SHAR requirements are met:
- SHAR-01: URL updates in lightbox
- SHAR-02: Deep links open correct photo
- SHAR-03: Album OG tags work
- SHAR-04: Homepage OG tags work
</verification>

<success_criteria>

- Human approves all shareability features
- No regressions in existing functionality (lightbox, album navigation, homepage)
- v1.1 milestone complete
  </success_criteria>

<output>
After completion, create `.planning/phases/14-shareability/14-03-SUMMARY.md`
</output>
