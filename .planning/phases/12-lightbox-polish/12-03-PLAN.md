---
phase: 12-lightbox-polish
plan: 03
type: execute
wave: 3
depends_on: ["12-02"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "Lightbox loads appropriately-sized derivatives (not always 2400w)"
    - "Swipe down closes the lightbox on mobile"
    - "Pinch-to-zoom and double-tap-to-zoom work on mobile"
    - "Fullscreen button present on supported browsers, absent on iPhone Safari"
    - "EXIF panel hides during zoom and reappears when zoomed out"
---

<objective>
Verify the lightbox polish features work correctly across devices.

Purpose: Phase 12's success criteria require visual/interactive verification that cannot be automated — gesture feel, responsive image loading, and fullscreen behavior must be confirmed by the user.

Output: Confirmed working lightbox with all four LBOX requirements satisfied.
</objective>

<execution_context>
@/Users/arxherre/.claude/get-shit-done/workflows/execute-plan.md
@/Users/arxherre/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/phases/12-lightbox-polish/12-02-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Run backfill and start dev server</name>
  <files></files>
  <action>
    1. Run the dimensions backfill to populate existing photos:
       ```bash
       npm run dimensions:backfill
       ```
    2. Start the dev server:
       ```bash
       npm run dev
       ```
    3. Report the output of the backfill (how many photos processed, any failures).
  </action>
  <verify>
    Backfill completes without fatal errors. Dev server starts on port 3000.
  </verify>
  <done>Existing photos have width/height populated. Dev server is running.</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
    Lightbox with responsive images, touch gestures, zoom, and fullscreen:
    - LBOX-01: Responsive srcSet loading (derivative selection based on screen size)
    - LBOX-02: Swipe down to close (iOS-style drag-to-dismiss)
    - LBOX-03: Pinch-to-zoom and double-tap-to-zoom
    - LBOX-04: Fullscreen button in toolbar
    - Bonus: EXIF panel hides during zoom
  </what-built>
  <how-to-verify>
    **Desktop browser (http://localhost:3000):**
    1. Click a photo to open lightbox
    2. Verify toolbar has: zoom controls, fullscreen button, info (i) button, close (X) button — in that order
    3. Click fullscreen button — browser chrome should hide. Press Escape to exit fullscreen.
    4. Click the zoom-in button — image should zoom. Click zoom-out to return.
    5. Open EXIF panel (info button), then zoom in — EXIF panel should hide. Zoom out — panel should reappear.
    6. Open browser DevTools → Network tab. Click another photo — check that it loads an appropriately-sized derivative (e.g., 600w.webp or 1200w.webp, not always 2400w.webp)

    **Mobile browser (or responsive mode in DevTools):**
    7. Open lightbox. Swipe down on the photo — it should follow your finger and close when released.
    8. Open lightbox. Pinch to zoom on the photo — it should zoom smoothly and proportionally.
    9. Open lightbox. Double-tap the photo — it should zoom in. Double-tap again — zoom more. Double-tap again — return to 1x.
    10. While zoomed in, try swiping down — it should PAN the image, not close the lightbox.

  </how-to-verify>
  <resume-signal>Type "approved" or describe any issues found</resume-signal>
</task>

</tasks>

<verification>
All four LBOX requirements verified by human testing on desktop and mobile.
</verification>

<success_criteria>

- User confirms responsive images load (not always largest)
- User confirms swipe-down-to-close works on mobile
- User confirms pinch and double-tap zoom work on mobile
- User confirms fullscreen button is present and functional
- User confirms EXIF panel hides during zoom
  </success_criteria>

<output>
After completion, create `.planning/phases/12-lightbox-polish/12-03-SUMMARY.md`
</output>
